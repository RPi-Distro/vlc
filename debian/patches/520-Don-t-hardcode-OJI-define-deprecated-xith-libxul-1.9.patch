From 6dbe4986f7c11370c2bc275491d4502f5f4c3c60 Mon Sep 17 00:00:00 2001
From: Nicolas Chauvet <kwizart@gmail.com>
Date: Mon, 29 Mar 2010 23:45:46 +0200
Subject: [PATCH] - Don't hardcode OJI define - deprecated xith libxul 1.9.2
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: RÃ©mi Denis-Courmont <remi@remlab.net>
---
 projects/mozilla/support/npunix.c |    1 -
 projects/mozilla/vlcshell.cpp     |    2 ++
 projects/mozilla/vlcshell.h       |    3 +++
 3 files changed, 5 insertions(+), 1 deletions(-)

diff --git a/projects/mozilla/support/npunix.c b/projects/mozilla/support/npunix.c
index 9596c27..9eb851c 100644
--- a/projects/mozilla/support/npunix.c
+++ b/projects/mozilla/support/npunix.c
@@ -46,7 +46,6 @@
 #include "config.h"
 
 #define XP_UNIX 1
-#define OJI 1
 
 #include <npapi.h>
 #if (((NP_VERSION_MAJOR << 8) + NP_VERSION_MINOR) < 20)
diff --git a/projects/mozilla/vlcshell.cpp b/projects/mozilla/vlcshell.cpp
index bff669d..5de1ed0 100644
--- a/projects/mozilla/vlcshell.cpp
+++ b/projects/mozilla/vlcshell.cpp
@@ -272,10 +272,12 @@ NPError NPP_Initialize( void )
     return NPERR_NO_ERROR;
 }
 
+#ifdef OJI
 jref NPP_GetJavaClass( void )
 {
     return NULL;
 }
+#endif
 
 void NPP_Shutdown( void )
 {
diff --git a/projects/mozilla/vlcshell.h b/projects/mozilla/vlcshell.h
index 6dd1561..114865a 100644
--- a/projects/mozilla/vlcshell.h
+++ b/projects/mozilla/vlcshell.h
@@ -27,7 +27,10 @@
 char * NPP_GetMIMEDescription( void );
 
 NPError NPP_Initialize( void );
+
+#ifdef OJI 
 jref NPP_GetJavaClass( void );
+#endif
 void NPP_Shutdown( void );
 
 NPError NPP_New( NPMIMEType pluginType, NPP instance, uint16 mode, int16 argc,
-- 
1.7.0

